<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Demo 1</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <style>
      .zero-opacity {
        opacity: 0;
      }
      .btn:focus {
        outline: none;
        box-shadow: none;
      }   
    </style>
  </head>
  <body class="w-100 vh-100 bg-dark d-flex flex-column align-items-center justify-content-center">
    <script>
      function delegate() {
        fetch('http://localhost:1234/demo_1_bg.wasm')
          .then(response => response.blob())
          .then(response => response.arrayBuffer())
          .then(buffer => {
            const importObject = {
              imports: {
                alert(arg) {
                  alert(arg)
                }
              }
            }
            WebAssembly.instantiate(buffer, importObject)
              .then(obj => console.log(obj))
              // .then(obj => console.log(obj.instance.exports.greet()))
          })
      }

      function sayHi() {
      }
    </script>
    <h1 id="work" class="text-white zero-opacity">WORK DONE!</h1>
    <div class="my-3">
      <button type="button" onclick="this.blur();delegate()" class="mx-3 btn btn-outline-light">Delegate work</button>
      <button type="button" onclick="this.blur();sayHi()" class="mx-3 btn btn-outline-light">Say Hi from Rust</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js" integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous"></script>
  </body>
</html>
